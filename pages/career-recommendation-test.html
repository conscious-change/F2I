---
layout: page
title: Career Recommendation Engine Test
subtitle: Testing the career recommendation engine data structure
---

<div class="container">
  <div class="test-section">
    <h2>Career Recommendation Engine Test</h2>
    <p>This page demonstrates the career recommendation engine based on self-assessment results.</p>

    <div class="test-controls">
      <button id="loadSampleData" class="btn btn-primary">Load Sample Data</button>
      <button id="loadFromAssessment" class="btn btn-primary">Load from Self-Assessment</button>
      <input type="file" id="assessmentFileInput" accept=".json" style="display: none;">
    </div>

    <div class="results-section">
      <div class="row">
        <div class="col-md-12">
          <h3>Career Matches</h3>
          <div id="careerMatches" class="results-block career-matches">
            <p>Load assessment data to see career matches.</p>
          </div>
        </div>
      </div>

      <div class="career-details-section">
        <h3>Career Details</h3>
        <div id="careerDetails" class="results-block">
          <p>Select a career match to see details.</p>
        </div>
      </div>

      <div class="skills-profile-section">
        <h3>Your Skills Profile</h3>

        <div class="row">
          <div class="col-md-4">
            <h4>Top Technical Skills</h4>
            <div id="topTechnicalSkills" class="results-block">None identified yet.</div>
          </div>

          <div class="col-md-4">
            <h4>Top Soft Skills</h4>
            <div id="topSoftSkills" class="results-block">None identified yet.</div>
          </div>

          <div class="col-md-4">
            <h4>Skill Gaps</h4>
            <div id="skillGaps" class="results-block">None identified yet.</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .test-section {
    background-color: #f8f9fa;
    border-radius: 8px;
    padding: 2rem;
    margin-bottom: 2rem;
  }

  .test-controls {
    margin-bottom: 2rem;
  }

  .test-controls button {
    margin-right: 1rem;
    margin-bottom: 1rem;
  }

  .results-section {
    margin-top: 2rem;
  }

  .code-block {
    background-color: #f1f1f1;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 1rem;
    max-height: 300px;
    overflow-y: auto;
    font-family: monospace;
    white-space: pre-wrap;
  }

  .results-block {
    background-color: white;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 1rem;
    margin-bottom: 1.5rem;
  }

  .skill-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #eee;
  }

  .skill-name {
    font-weight: 500;
  }

  .skill-rating {
    background-color: #e9ecef;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-size: 0.9rem;
  }

  .career-match-item {
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 1rem;
    margin-bottom: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .career-match-item:hover {
    border-color: #0056b3;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
  }

  .career-match-item.selected {
    border-color: #0056b3;
    background-color: #f0f7ff;
  }

  .match-score {
    font-weight: bold;
    color: #0056b3;
    font-size: 1.2rem;
  }

  .career-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  .career-description {
    font-size: 0.9rem;
    color: #555;
    margin-bottom: 0.5rem;
  }

  .career-details-section {
    margin-top: 2rem;
  }

  .skills-profile-section {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid #ddd;
  }

  .career-details-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .career-details-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #0056b3;
  }

  .career-details-salary {
    font-weight: 600;
    color: #28a745;
  }

  .career-details-section h4 {
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    color: #0056b3;
    font-size: 1.1rem;
  }

  .skills-list, .interests-list, .tools-list, .tips-list {
    padding-left: 1.5rem;
  }

  .skills-list li, .interests-list li, .tools-list li, .tips-list li {
    margin-bottom: 0.5rem;
  }

  .skill-gap-note {
    font-size: 0.85rem;
    color: #6c757d;
    margin-top: 0.25rem;
  }

  .career-info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-top: 1rem;
  }

  .career-info-item {
    background-color: #f8f9fa;
    padding: 0.75rem;
    border-radius: 4px;
  }

  .career-info-label {
    font-weight: 600;
    font-size: 0.85rem;
    color: #495057;
    margin-bottom: 0.25rem;
  }

  .career-info-value {
    font-size: 0.95rem;
  }

  @media (max-width: 768px) {
    .career-info-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<script src="/assets/js/career-recommendation-engine.js"></script>
<script src="/assets/js/career-database.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // DOM elements
    const loadSampleDataBtn = document.getElementById('loadSampleData');
    const loadFromAssessmentBtn = document.getElementById('loadFromAssessment');
    const assessmentFileInput = document.getElementById('assessmentFileInput');
    const topTechnicalSkillsElement = document.getElementById('topTechnicalSkills');
    const topSoftSkillsElement = document.getElementById('topSoftSkills');
    const skillGapsElement = document.getElementById('skillGaps');
    const careerMatchesElement = document.getElementById('careerMatches');
    const careerDetailsElement = document.getElementById('careerDetails');

    // Current user profile and selected career
    let currentProfile = null;
    let selectedCareer = null;

    // Sample data for testing
    const sampleData = {
      coreTechnicalSkills: {
        "data_analysis": 5,
        "project_management": 4,
        "regulatory_compliance": 3,
        "budget_management": 4,
        "policy_development": 2
      },
      agencySkills: [
        { name: "Federal Acquisition", rating: "5", notes: "Led procurement teams" },
        { name: "Grant Management", rating: "4", notes: "Managed federal grants" },
        { name: "Legislative Analysis", rating: "3", notes: "Reviewed policy impacts" }
      ],
      softwareTools: [
        { name: "Microsoft Excel", rating: "5", equivalent: "Advanced data analysis" },
        { name: "Tableau", rating: "3", equivalent: "Data visualization" },
        { name: "SharePoint", rating: "4", equivalent: "Content management" }
      ],
      industrySkills: [
        { name: "Agile Methodology", rating: "2", gap: "Need formal training" },
        { name: "Cloud Computing", rating: "1", gap: "Require AWS certification" },
        { name: "Product Management", rating: "3", gap: "Need private sector experience" }
      ],
      leadershipSkills: {
        "team_leadership": 4,
        "strategic_planning": 5,
        "change_management": 3,
        "mentoring": 4
      },
      problemSolvingSkills: {
        "critical_thinking": 5,
        "decision_making": 4,
        "risk_assessment": 5,
        "process_improvement": 3
      },
      communicationSkills: {
        "written_communication": 5,
        "presentation": 4,
        "stakeholder_management": 4,
        "negotiation": 3
      },
      industryAnalysis: {
        targetIndustry1: "Technology",
        targetIndustry2: "Consulting",
        targetIndustry3: "Healthcare"
      },
      achievements: [
        {
          title: "Process Improvement Initiative",
          description: "Led agency-wide process improvement",
          impact: "Reduced processing time by 30%",
          skills: "Leadership, Process Analysis"
        },
        {
          title: "Budget Optimization",
          description: "Identified cost-saving opportunities",
          impact: "Saved $2.5M annually",
          skills: "Financial Analysis, Strategic Planning"
        }
      ],
      starStories: [
        {
          situation: "Agency faced compliance deadline",
          task: "Needed to coordinate cross-functional team",
          action: "Developed project plan and led daily standups",
          result: "Completed project 2 weeks ahead of schedule",
          skills: "Project Management, Leadership"
        }
      ],
      developSkill1: "Cloud Computing",
      developSkill2: "Agile Project Management",
      developSkill3: "Data Science",
      nextStep1: "Apply for role as a Product Manager in tech company",
      nextStep2: "Complete AWS certification",
      nextStep3: "Expand professional network in target industry"
    };

    // Function to calculate career match score (0-100)
    function calculateMatchScore(profile, career) {
      let score = 0;
      let maxScore = 0;

      // Technical skills match
      const topTechSkills = profile.getTopTechnicalSkills();
      topTechSkills.forEach(skill => {
        const normalizedSkillName = skill.name.toLowerCase().replace(/[^a-z0-9]/g, '_');
        const careerSkillRating = career.requiredSkills.technical[normalizedSkillName] || 0;

        if (careerSkillRating > 0) {
          // Weight by importance to the career
          score += (skill.rating * careerSkillRating) / 5;
          maxScore += careerSkillRating;
        }
      });

      // Soft skills match
      const topSoftSkills = profile.getTopSoftSkills();
      topSoftSkills.forEach(skill => {
        const normalizedSkillName = skill.name.toLowerCase().replace(/[^a-z0-9]/g, '_');
        const careerSkillRating = career.requiredSkills.soft[normalizedSkillName] || 0;

        if (careerSkillRating > 0) {
          // Weight by importance to the career
          score += (skill.rating * careerSkillRating) / 5;
          maxScore += careerSkillRating;
        }
      });

      // Industry interest match
      if (profile.professionalInterests.targetIndustries.length > 0) {
        const industries = profile.professionalInterests.targetIndustries.map(i => i.toLowerCase());
        const careerIndustries = career.relatedInterests.map(i => i.toLowerCase());

        // Check for overlapping interests
        const overlappingInterests = industries.filter(i => careerIndustries.includes(i));
        if (overlappingInterests.length > 0) {
          score += 10 * (overlappingInterests.length / careerIndustries.length);
          maxScore += 10;
        }
      }

      // Calculate final percentage score
      const finalScore = maxScore > 0 ? Math.round((score / maxScore) * 100) : 50;

      // Adjust score based on skill gaps
      const skillGaps = profile.getSkillGaps();
      const criticalGaps = skillGaps.filter(gap => {
        const normalizedSkillName = gap.name.toLowerCase().replace(/[^a-z0-9]/g, '_');
        return career.requiredSkills.technical[normalizedSkillName] >= 4;
      });

      // Penalize for critical skill gaps
      if (criticalGaps.length > 0) {
        return Math.max(finalScore - (criticalGaps.length * 10), 30);
      }

      return finalScore;
    }

    // Function to display profile data and career matches
    function displayProfileData(profile) {
      currentProfile = profile;

      // Display top technical skills
      const topTechSkills = profile.getTopTechnicalSkills();
      if (topTechSkills.length > 0) {
        topTechnicalSkillsElement.innerHTML = topTechSkills.map(skill =>
          `<div class="skill-item">
            <span class="skill-name">${skill.name}</span>
            <span class="skill-rating">Rating: ${skill.rating}/5</span>
          </div>`
        ).join('');
      } else {
        topTechnicalSkillsElement.textContent = "No top technical skills identified.";
      }

      // Display top soft skills
      const topSoftSkillsList = profile.getTopSoftSkills();
      if (topSoftSkillsList.length > 0) {
        topSoftSkillsElement.innerHTML = topSoftSkillsList.map(skill =>
          `<div class="skill-item">
            <span class="skill-name">${skill.name}</span>
            <span class="skill-rating">Rating: ${skill.rating}/5</span>
          </div>`
        ).join('');
      } else {
        topSoftSkillsElement.textContent = "No top soft skills identified.";
      }

      // Display skill gaps
      const skillGapsList = profile.getSkillGaps();
      if (skillGapsList.length > 0) {
        skillGapsElement.innerHTML = skillGapsList.map(skill =>
          `<div class="skill-item">
            <div>
              <span class="skill-name">${skill.name}</span>
              <div class="skill-gap-note">Gap: ${skill.gap || 'Not specified'}</div>
            </div>
            <span class="skill-rating">Current Level: ${skill.rating}/5</span>
          </div>`
        ).join('');
      } else {
        skillGapsElement.textContent = "No significant skill gaps identified.";
      }

      // Calculate and display career matches
      const careerMatches = careerDatabase.map(career => {
        const matchScore = calculateMatchScore(profile, career);
        return {
          career: career,
          score: matchScore
        };
      }).sort((a, b) => b.score - a.score);

      if (careerMatches.length > 0) {
        careerMatchesElement.innerHTML = careerMatches.map(match =>
          `<div class="career-match-item" data-career-id="${match.career.id}">
            <div class="match-score">${match.score}% Match</div>
            <div class="career-title">${match.career.title}</div>
            <div class="career-description">${match.career.description}</div>
          </div>`
        ).join('');

        // Add event listeners to career match items
        document.querySelectorAll('.career-match-item').forEach(item => {
          item.addEventListener('click', function() {
            const careerId = this.getAttribute('data-career-id');
            const career = careerDatabase.find(c => c.id === careerId);

            // Update selected state
            document.querySelectorAll('.career-match-item').forEach(el => {
              el.classList.remove('selected');
            });
            this.classList.add('selected');

            // Display career details
            displayCareerDetails(career);
          });
        });

        // Select the first career by default
        if (careerMatches.length > 0) {
          const firstCareer = careerMatches[0].career;
          document.querySelector('.career-match-item').classList.add('selected');
          displayCareerDetails(firstCareer);
        }
      } else {
        careerMatchesElement.innerHTML = "<p>No career matches found.</p>";
        careerDetailsElement.innerHTML = "<p>No career details available.</p>";
      }
    }

    // Function to display career details
    function displayCareerDetails(career) {
      selectedCareer = career;

      // Create HTML for career details
      let html = `
        <div class="career-details-header">
          <div class="career-details-title">${career.title}</div>
          <div class="career-details-salary">${career.careerInfo.medianSalary}</div>
        </div>

        <p>${career.description}</p>
        <p><strong>Federal Transition:</strong> ${career.federalTransition}</p>

        <h4>Required Technical Skills</h4>
        <ul class="skills-list">
      `;

      // Add technical skills
      const technicalSkills = Object.entries(career.requiredSkills.technical)
        .filter(([_, rating]) => rating >= 3)
        .sort((a, b) => b[1] - a[1]);

      if (technicalSkills.length > 0) {
        technicalSkills.forEach(([skill, rating]) => {
          const formattedSkill = skill.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
          html += `<li>${formattedSkill} <span class="skill-rating">Importance: ${rating}/5</span></li>`;
        });
      } else {
        html += `<li>No specific technical skills listed.</li>`;
      }

      html += `
        </ul>

        <h4>Required Soft Skills</h4>
        <ul class="skills-list">
      `;

      // Add soft skills
      const softSkills = Object.entries(career.requiredSkills.soft)
        .filter(([_, rating]) => rating >= 3)
        .sort((a, b) => b[1] - a[1]);

      if (softSkills.length > 0) {
        softSkills.forEach(([skill, rating]) => {
          const formattedSkill = skill.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
          html += `<li>${formattedSkill} <span class="skill-rating">Importance: ${rating}/5</span></li>`;
        });
      } else {
        html += `<li>No specific soft skills listed.</li>`;
      }

      html += `
        </ul>

        <h4>Relevant Tools & Technologies</h4>
        <ul class="tools-list">
      `;

      // Add relevant tools
      if (career.relevantTools && career.relevantTools.length > 0) {
        career.relevantTools.forEach(tool => {
          html += `<li>${tool}</li>`;
        });
      } else {
        html += `<li>No specific tools listed.</li>`;
      }

      html += `
        </ul>

        <h4>Career Information</h4>
        <div class="career-info-grid">
          <div class="career-info-item">
            <div class="career-info-label">Salary Range</div>
            <div class="career-info-value">${career.careerInfo.salaryRange}</div>
          </div>

          <div class="career-info-item">
            <div class="career-info-label">Job Outlook</div>
            <div class="career-info-value">${career.careerInfo.outlook}</div>
          </div>

          <div class="career-info-item">
            <div class="career-info-label">Work Environment</div>
            <div class="career-info-value">${career.careerInfo.workEnvironment}</div>
          </div>

          <div class="career-info-item">
            <div class="career-info-label">Career Advancement</div>
            <div class="career-info-value">${career.careerInfo.advancement}</div>
          </div>

          <div class="career-info-item">
            <div class="career-info-label">Entry Requirements</div>
            <div class="career-info-value">${career.careerInfo.entryRequirements}</div>
          </div>
        </div>

        <h4>Federal-to-Private Transition Tips</h4>
        <ul class="tips-list">
      `;

      // Add transition tips
      if (career.transitionTips && career.transitionTips.length > 0) {
        career.transitionTips.forEach(tip => {
          html += `<li>${tip}</li>`;
        });
      } else {
        html += `<li>No specific transition tips available.</li>`;
      }

      html += `
        </ul>
      `;

      careerDetailsElement.innerHTML = html;
    }

    // Load sample data
    loadSampleDataBtn.addEventListener('click', function() {
      const profile = new UserAssessmentProfile();
      profile.populateFromSelfAssessment(sampleData);
      displayProfileData(profile);
    });

    // Load from self-assessment file
    loadFromAssessmentBtn.addEventListener('click', function() {
      assessmentFileInput.click();
    });

    // Handle file selection
    assessmentFileInput.addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const assessmentData = JSON.parse(e.target.result);
          const profile = new UserAssessmentProfile();
          profile.populateFromSelfAssessment(assessmentData);
          displayProfileData(profile);
        } catch (error) {
          console.error('Error loading assessment data:', error);
          alert('Error loading assessment data. Please make sure the file is valid JSON.');
        }
      };
      reader.readAsText(file);
    });
  });
</script>
