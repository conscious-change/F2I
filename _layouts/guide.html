---
layout: default
---

{% include breadcrumbs.html %}

<article class="guide">
  <div class="guide-header">
    <div class="container">
      <h1 class="guide-title">{{ page.title }}</h1>
      <div class="guide-meta">
        {% if page.author %}
        <div class="guide-author">
          <span class="author-name">By {{ page.author }}</span>
          {% if page.author_position %}
          <span class="author-position">{{ page.author_position }}</span>
          {% endif %}
        </div>
        {% endif %}

        <div class="guide-details">
          {% if page.difficulty %}
          <div class="detail-item">
            <span class="detail-label">Difficulty:</span>
            <span class="detail-value">{{ page.difficulty }}</span>
          </div>
          {% endif %}

          {% if page.time_to_complete %}
          <div class="detail-item">
            <span class="detail-label">Time to Complete:</span>
            <span class="detail-value">{{ page.time_to_complete }}</span>
          </div>
          {% endif %}

          {% if page.categories %}
          <div class="detail-item">
            <span class="detail-label">Categories:</span>
            <span class="detail-value">
              {% for category in page.categories %}
              <span class="category">{{ category }}</span>{% unless forloop.last %}, {% endunless %}
              {% endfor %}
            </span>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div class="guide-content">
    <div class="container">
      <div class="guide-grid">
        <div class="guide-main">
          {% if page.image %}
          <div class="guide-image">
            {% include responsive-image-wrapper.html path=page.image alt=page.title lazy=true %}
          </div>
          {% endif %}

          <div class="guide-toc">
            <h2>Table of Contents</h2>
            <div id="toc"></div>
          </div>

          <div class="guide-body">
            {{ content }}
          </div>

          {% if page.tags %}
          <div class="guide-tags">
            <h3>Tags:</h3>
            <div class="tags-list">
              {% for tag in page.tags %}
              <span class="tag">{{ tag }}</span>
              {% endfor %}
            </div>
          </div>
          {% endif %}
        </div>

        <div class="guide-sidebar">
          <div class="guide-actions">
            <a href="#" class="btn btn-primary print-btn" onclick="window.print(); return false;">Print Guide</a>
            <a href="#" class="btn btn-secondary pdf-btn">Download as PDF</a>
          </div>

          <div class="related-guides">
            <h3>Related Guides</h3>
            <ul class="related-list">
              {% assign maxRelated = 5 %}
              {% assign minCommonTags = 1 %}
              {% assign maxRelatedCounter = 0 %}

              {% for guide in site.guides %}
                {% assign sameTagCount = 0 %}
                {% for tag in guide.tags %}
                  {% if guide.url != page.url %}
                    {% if page.tags contains tag %}
                      {% assign sameTagCount = sameTagCount | plus: 1 %}
                    {% endif %}
                  {% endif %}
                {% endfor %}

                {% if sameTagCount >= minCommonTags %}
                  <li><a href="{{ guide.url }}">{{ guide.title }}</a></li>

                  {% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
                  {% if maxRelatedCounter >= maxRelated %}
                    {% break %}
                  {% endif %}
                {% endif %}
              {% endfor %}
            </ul>
          </div>

          <div class="guide-resources">
            <h3>Recommended Resources</h3>
            <ul class="resources-list">
              {% for resource in site.resources limit:3 %}
                <li><a href="{{ resource.url }}">{{ resource.title }}</a></li>
              {% endfor %}
            </ul>
          </div>

          <div class="feedback-box">
            <h3>Was This Guide Helpful?</h3>
            <p>We're constantly improving our guides. Let us know what you think!</p>
            <div class="feedback-buttons">
              <button class="feedback-btn positive">Yes, it helped!</button>
              <button class="feedback-btn negative">Needs improvement</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</article>

<section class="more-guides">
  <div class="container">
    <h2>Explore More Guides</h2>
    <div class="guides-grid">
      {% assign current_guide = page.url %}
      {% for guide in site.guides limit:3 %}
        {% if guide.url != current_guide %}
          <div class="guide-card">
            <a href="{{ guide.url }}">
              {% if guide.image %}
              <div class="card-image">
                {% include responsive-image-wrapper.html path=guide.image alt=guide.title lazy=true %}
              </div>
              {% endif %}
              <h3>{{ guide.title }}</h3>
              <p class="guide-difficulty">{{ guide.difficulty }}</p>
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>
    <div class="text-center">
      <a href="/guides/" class="btn btn-secondary">View All Guides</a>
    </div>
  </div>
</section>

<script>
  // Generate table of contents
  document.addEventListener('DOMContentLoaded', function() {
    const headings = document.querySelectorAll('.guide-body h2, .guide-body h3');
    const toc = document.getElementById('toc');

    if (headings.length > 0 && toc) {
      const tocList = document.createElement('ul');

      headings.forEach((heading, index) => {
        // Add ID to heading if it doesn't have one
        if (!heading.id) {
          heading.id = 'heading-' + index;
        }

        const listItem = document.createElement('li');
        const link = document.createElement('a');

        link.href = '#' + heading.id;
        link.textContent = heading.textContent;

        if (heading.tagName === 'H3') {
          listItem.classList.add('toc-subitem');
        }

        listItem.appendChild(link);
        tocList.appendChild(listItem);
      });

      toc.appendChild(tocList);
    }
  });
</script>
